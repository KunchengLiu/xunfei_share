# AList 站点批量下载工具 (AList Bulk Downloader)

这是一个基于 Python 的自动化脚本，专门用于递归爬取并下载基于 [AList](https://alist.nn.ci/) (V3 API) 搭建的文件列表站点中的所有内容。

用于下载https://share.feixu.site 内的课程资料

脚本会自动遍历目标网站的目录结构，模拟浏览器请求，支持断点续传，适合用于备份资料或批量下载课程资源。

## ✨ 主要功能

  * **📂 递归遍历**: 自动识别文件夹并进入所有子目录进行抓取。
  * **🚀 断点续传**: 如果下载中断，重新运行脚本会从断开的地方继续下载，而不是重新开始。
  * **⏭️ 智能跳过**: 自动检测本地是否存在同名且大小一致的文件，如果存在则跳过，实现增量同步。
  * **🔐 密码支持**: 支持访问受密码保护的 AList 目录（需在配置中填写密码）。
  * **🛡️ 模拟请求**: 使用自定义 User-Agent 和 Referer 头，降低被服务器拦截的风险。

## 🛠️ 环境要求

  * Python 3.6+
  * `requests` 库

### 安装依赖

在使用前，请确保已安装 `requests` 库：

```bash
pip install requests
```

## ⚙️ 配置说明

打开脚本文件（例如 `download.py`），在顶部的 **`--- 配置 ---`** 区域修改以下变量：

```python
# 1. 目标网站地址 (不带末尾的 /)
BASE_URL = "https://share.feixu.site"

# 2. 本地保存路径 ("." 代表当前目录)
DOWNLOAD_DIR = "." 

# 3. 访问密码 (如果目标网站或特定目录需要密码，请在此填入)
# 注意：AList 的密码通常是全局或目录级别的，如果不需要密码留空即可
PASSWORD = "" 
```

## 🚀 使用方法

1.  将脚本保存为 `download.py`（或其他你喜欢的名字）。
2.  在终端或命令行中运行：

<!-- end list -->

```bash
python download.py
```

3.  脚本将开始运行，你会看到如下输出：
      * `--- 正在进入目录: /xxx ---`
      * `[下载] 正在下载: ./xxx/file.pdf (12.50 MB)`
      * `[跳过] 文件已存在且大小一致: ./xxx/old_file.jpg`

## ⚠️ 注意事项

1.  **API 限制**: 该脚本通过 API 获取文件链接。如果目标站点开启了反爬虫策略或 API限流，可能会导致请求失败（HTTP 429 或 403）。
2.  **网络流量**: 批量下载会消耗大量带宽，请确保在合适的网络环境下使用。
3.  **免责声明**: 本工具仅用于合法的个人学习和数据备份用途。请勿用于下载版权受保护的内容或对目标服务器造成恶意攻击。

## 📝 常见问题

  * **报错 `KeyError: 'raw_url'`**:
      * 这通常意味着虽然获取到了文件元数据，但服务器没有返回下载链接。可能是因为文件被加密、需要特定的 Token，或者该文件类型不支持预览/下载。
  * **下载速度慢**:
      * 速度取决于目标 AList 服务器的带宽限制以及你的网络环境。脚本仅作为一个下载器，无法突破服务端的物理限速。
